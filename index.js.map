{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_KEY = \"49357891-7b2a70058984a44bc943728d9\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    return { images: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw new Error(\"Failed to fetch images.\");\n  }\n}\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n            </a>\n            <ul class=\"info\">\n                <li> üëç ${likes}</li>\n                <li> üëÄ ${views}</li>\n                <li> üí¨ ${comments}</li>\n                <li> üì• ${downloads}</li>\n            </ul>\n        </li>\n    `\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n","\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\niziToast.settings({\n  position: \"topRight\",\n  iconColor: \"#fff\",\n  messageColor: \"#fff\",\n});\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  query = e.target.elements[\"search-text\"].value.trim();\n  if (!query) {\n    iziToast.warning({ title: \"Warning\", message: \"Please enter a search query!\" });\n    return;\n  }\n  \n  page = 1;\n  clearGallery();\n  toggleLoadMore(false);\n  toggleLoader(true);\n\n  try {\n    const { images, totalHits } = await fetchImages(query, page, perPage);\n    handleImagesResponse(images, totalHits);\n  } catch (error) {\n    iziToast.error({ title: \"Error\", message: \"Failed to fetch images.\" });\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page += 1;\n  toggleLoader(true);\n  toggleLoadMore(false);\n\n  try {\n    const { images, totalHits } = await fetchImages(query, page, perPage);\n    renderGallery(images);\n    handlePagination(totalHits);\n    scrollPage();\n  } catch (error) {\n    iziToast.error({ title: \"Error\", message: \"Failed to fetch images.\" });\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nfunction handleImagesResponse(images, totalHits) {\n  if (images.length === 0) {\n    iziToast.error({ title: \"Error\", message: \"No images found. Try another query.\" });\n  } else {\n    renderGallery(images);\n    handlePagination(totalHits);\n  }\n}\n\nfunction handlePagination(totalHits) {\n  if (page * perPage >= totalHits) {\n    iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n  } else {\n    toggleLoadMore(true);\n  }\n}\n\nfunction toggleLoader(visible) {\n  loader.classList.toggle(\"hidden\", !visible);\n}\n\nfunction toggleLoadMore(visible) {\n  loadMoreBtn.classList.toggle(\"hidden\", !visible);\n}\n\nfunction scrollPage() {\n  const galleryItem = document.querySelector(\".gallery-item\");\n  if (galleryItem) {\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","error","gallery","lightbox","SimpleLightbox","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","iziToast","form","loader","loadMoreBtn","toggleLoadMore","toggleLoader","totalHits","handleImagesResponse","handlePagination","scrollPage","visible","galleryItem","cardHeight"],"mappings":"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"}